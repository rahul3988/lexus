<Window x:Class="Lexus2_0.Desktop.Views.OpenAllTicketDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Open All Tickets" 
        Height="600" 
        Width="800"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize">
    <Grid Background="{StaticResource BackgroundWhite}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <Border Grid.Row="0" 
               Background="{StaticResource PrimaryBlue}" 
               Padding="15,10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0"
                          Text="Open All Tickets" 
                          FontSize="18" 
                          FontWeight="Bold" 
                          Foreground="{StaticResource White}"
                          FontFamily="Segoe UI"/>
                <Button Grid.Column="1"
                       Content="X"
                       Click="CloseButton_Click"
                       Background="Transparent"
                       Foreground="{StaticResource White}"
                       BorderThickness="0"
                       FontSize="16"
                       FontWeight="Bold"
                       Padding="10,5"
                       Cursor="Hand"/>
            </Grid>
        </Border>
        
        <!-- Ticket Details -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Margin="15">
            <ItemsControl x:Name="TicketsItemsControl">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Background="{StaticResource BackgroundLightGrey}" 
                               Padding="15" 
                               Margin="0,0,0,15"
                               CornerRadius="5" 
                               BorderBrush="{StaticResource PrimaryBlue}"
                               BorderThickness="1">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                
                                <!-- Ticket Header -->
                                <Grid Grid.Row="0" Margin="0,0,0,10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0"
                                              Text="{Binding TotalTicket}"
                                              FontSize="20"
                                              FontWeight="Bold"
                                              Foreground="{StaticResource PrimaryBlue}"
                                              FontFamily="Segoe UI"
                                              Margin="0,0,10,0"/>
                                    <StackPanel Grid.Column="1">
                                        <TextBlock Text="{Binding Pair}"
                                                  FontSize="14"
                                                  FontWeight="SemiBold"
                                                  Foreground="{StaticResource TextDark}"
                                                  FontFamily="Segoe UI"/>
                                        <TextBlock Text="{Binding GN}"
                                                  FontSize="12"
                                                  Foreground="{StaticResource TextDark}"
                                                  FontFamily="Segoe UI"/>
                                        <TextBlock Text="{Binding Name}"
                                                  FontSize="12"
                                                  Foreground="{StaticResource TextDark}"
                                                  FontFamily="Segoe UI"/>
                                    </StackPanel>
                                    <Button Grid.Column="2"
                                           Content="Stop Payment"
                                           Click="StopPaymentButton_Click"
                                           Tag="{Binding}"
                                           Style="{StaticResource SecondaryButton}"
                                           Padding="10,5"
                                           FontSize="11"/>
                                </Grid>
                                
                                <!-- Route Info -->
                                <Grid Grid.Row="1" Margin="0,0,0,10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0"
                                              Text="Route: "
                                              FontWeight="SemiBold"
                                              Foreground="{StaticResource TextDark}"
                                              FontFamily="Segoe UI"
                                              Margin="0,0,5,0"/>
                                    <TextBlock Grid.Column="1"
                                              Foreground="{StaticResource TextDark}"
                                              FontFamily="Segoe UI">
                                        <Run Text="{Binding From}"/>
                                        <Run Text=" â†’ "/>
                                        <Run Text="{Binding To}"/>
                                    </TextBlock>
                                </Grid>
                                
                                <!-- Ticket Details Grid -->
                                <Grid Grid.Row="2" Margin="0,0,0,10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel Grid.Column="0">
                                        <TextBlock Text="SL:GN"
                                                  FontSize="12"
                                                  Foreground="{StaticResource TextDark}"
                                                  FontFamily="Segoe UI"/>
                                        <TextBlock Text="{Binding SL}"
                                                  FontSize="11"
                                                  Foreground="{StaticResource TextDark}"
                                                  FontFamily="Segoe UI"/>
                                    </StackPanel>
                                    <StackPanel Grid.Column="1">
                                        <TextBlock Text="T-1"
                                                  FontSize="12"
                                                  Foreground="{StaticResource TextDark}"
                                                  FontFamily="Segoe UI"/>
                                        <TextBlock Text="{Binding Date}"
                                                  FontSize="11"
                                                  Foreground="{StaticResource TextDark}"
                                                  FontFamily="Segoe UI"/>
                                    </StackPanel>
                                    <StackPanel Grid.Column="2">
                                        <TextBlock Text="RAILON"
                                                  FontSize="12"
                                                  Foreground="{StaticResource TextDark}"
                                                  FontFamily="Segoe UI"/>
                                    </StackPanel>
                                    <StackPanel Grid.Column="3">
                                        <CheckBox Content="Enable OTP Reader"
                                                 IsChecked="{Binding EnableOtpReader}"
                                                 Foreground="{StaticResource TextDark}"
                                                 FontFamily="Segoe UI"
                                                 FontSize="11"/>
                                    </StackPanel>
                                </Grid>
                                
                                <!-- Username and Payment -->
                                <Grid Grid.Row="3" Margin="0,0,0,10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0"
                                              Text="{Binding Username}"
                                              FontSize="12"
                                              Foreground="{StaticResource TextDark}"
                                              FontFamily="Segoe UI"/>
                                    <TextBlock Grid.Column="1"
                                              Text="{Binding PaymentGateway}"
                                              FontSize="12"
                                              Foreground="{StaticResource TextDark}"
                                              FontFamily="Segoe UI"/>
                                </Grid>
                                
                                <!-- Action Buttons -->
                                <StackPanel Grid.Row="4" 
                                           Orientation="Horizontal" 
                                           HorizontalAlignment="Right">
                                    <Button Content="APP" 
                                           Click="AppButton_Click"
                                           Tag="{Binding}"
                                           Style="{StaticResource PrimaryButton}"
                                           Padding="20,10"
                                           MinWidth="100"
                                           Margin="0,0,10,0"
                                           FontSize="14"
                                           FontWeight="Bold"/>
                                    <Button Content="WEB" 
                                           Click="WebButton_Click"
                                           Tag="{Binding}"
                                           Style="{StaticResource PrimaryButton}"
                                           Padding="20,10"
                                           MinWidth="100"
                                           FontSize="14"
                                           FontWeight="Bold"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
        
        <!-- Footer -->
        <Border Grid.Row="2" 
               Background="{StaticResource BackgroundLightGrey}" 
               Padding="15,10"
               BorderBrush="{StaticResource PrimaryBlue}"
               BorderThickness="0,1,0,0">
            <TextBlock Text="{Binding ElementName=TicketsItemsControl, Path=Items.Count, StringFormat='Total Tickets: {0}'}"
                      FontSize="12"
                      Foreground="{StaticResource TextDark}"
                      FontFamily="Segoe UI"
                      HorizontalAlignment="Center"/>
        </Border>
    </Grid>
</Window>

